var appModel=function(){var t,e,n=function(t,n){chrome.storage.sync.get("defaultList",function(a){e=a,n(""===t?a:i(a.defaultList,"id",t,!1))})},a=function(){var t=new Uint8Array(32);crypto.getRandomValues(t);for(var e="",n=0;n<t.length;++n)e+=t[n].toString(16);return e},i=function(t,e,n,a){for(var i=0;i<t.length;i++)if(a){if(t[i][e]===n)return t[i]}else if(t[i][e]==n)return t[i];return null},r=function(t,e){return t.some(function(n,a){return t[a][e.key]==e.value&&(t.splice(a,1),!0)}),t};return{setCat:function(t,n,i){return function(t,n,i){var r=["blue2","blue1","teal2","teal1","yellow1","yellow2","dark1","dark2","orange1","orange2","red1","red2"],s=a();e.defaultList.unshift({id:s,Label:t,InsideCircle:n,data:[],defaultcolor:r[Math.floor(Math.random()*r.length)]}),chrome.storage.sync.set({defaultList:e.defaultList},function(){i(e)})}(t,n,i)},getCat:function(t,e){return n(t,e)},getCatList:function(t,e){return n(t,e)},delCat:function(t,n){return function(t,n){var a=r(e.defaultList,{key:"id",value:t});chrome.storage.sync.set({defaultList:a},function(t){n("ok")})}(t,n)},setLinkToCat:function(n,a,r){return function(n,a,r){var s=i(t,"id",Number(n.split("-")[0]),!0),c=i(s.tabs,"id",Number(n.split("-")[1]),!0);i(e.defaultList,"id",a,!1).data.push(c),chrome.storage.sync.set({defaultList:e.defaultList},function(){r("ok")})}(n,a,r)},delLinkfromCat:function(t,n,a){return function(t,n,a){var r=i(e.defaultList,"id",t,!1);r.data.splice(n,1);chrome.storage.sync.set({defaultList:e.defaultList},function(){a(r)})}(t,n,a)},sessionTabs:function(e){return function(e){chrome.windows.getAll({populate:!0},function(n){t=n,e(n)})}(e)}}};$(document).ready(function(){(function(){var t,e,n,a,i=function(t){var e=t.currentTarget.getAttribute("data-catid"),a=t.currentTarget.getAttribute("data-id");n.delLinkfromCat(e,a,function(t){renderCatList(t,t.id)})},r=function(t){chrome.tabs.create({url:t.currentTarget.getAttribute("data-url")})},s=function(){$(".failmessgae").addClass("hide"),$(".successmsg").addClass("hide");var t=$("#catname").val().trim();t.length>0?t.length>20?$(".failmessgae").removeClass("hide").text("Characters length should not be greater than 20 letters !!  "):n.setCat(t,t.substr(0,3),function(e){$(".successmsg").removeClass("hide").text(` ${t} category created successfully  !! `),$("#catname").val(""),T(e)}):$(".failmessgae").removeClass("hide").text("Please add Category name !!  ")},c=function(){$(".failmessgae").addClass("hide"),$(".successmsg").addClass("hide"),$(".addcat-conatiner").removeClass("hide"),$(".categories-container").hide()},o=function(){$(".cross-icon").addClass("hidden"),l(!1)},l=function(t){t?($(".details-conatiner").removeClass("hide"),$(".categories-container").hide()):($(".categories-container").show(),$(".details-conatiner").addClass("hide"),$(".addcat-conatiner").addClass("hide"))},d=function(t){var e=t.currentTarget.getAttribute("catid");n.delCat(e,function(e){"ok"===e&&(catdelet=!0,$(t.currentTarget).parent().remove(),$(".all-elements").height()>$(".mainMenu").height()&&$(".mainMenu").height($(".all-elements").height()))})};renderCatList=function(t,e){$(".cate-title").html(t.Label),$(".tr-data").empty(),t.data.length>0?t.data.forEach(function(n,a){var i=`<tr>\n                       <td width="75%">  \n                            <img data-url=${n.url} class="favionlink point-to-web" src="${n.favIconUrl}"> \n                            <span data-url=${n.url} class="tabtitle point-to-web">${n.title}</span>  \n                         </td>\n                        <td width="25%">\n                      <i title="Remove from ${t.Label}" data-id=${a} data-catid=${e} class="del-icons icon-minus-sign"></i>\n                      <i title="Open" data-url=${n.url} class="pull-right open-web point-to-web icon-play"></i>\n            </td></tr>`;$(".tr-data").append(i)}):$(".tr-data").html("No link found for this Category !!!")};var u=function(t){var e=t.currentTarget.getAttribute("id");l(!0),n.getCat(e,function(t){renderCatList(t,e)})},f=function(){a=setTimeout(g,1e3)},g=function(){$(".cross-icon").removeClass("hidden")},h=function(){$(".cross-icon").toggleClass("hidden")},m=function(){clearTimeout(a)},v=function(t){$(t.currentTarget).next().addClass("save-btn btn-primary").removeClass("btn-success"),$(t.currentTarget).next()[0].innerHTML="Save"},b=function(t){var e=$(t.currentTarget).prev().find("option:selected").attr("id"),a=t.currentTarget.getAttribute("id");n.setLinkToCat(a,e,function(){t.currentTarget.innerHTML="Added in Catgeory",$(t.currentTarget).removeClass("save-btn btn-primary").addClass("btn-success")})},p=function(){catdelet&&(e.empty(),k(),catdelet=!1),$(".mainMenu").removeClass("act"),$(".logo-right").removeClass("act"),$(".all-elements").show(),C()},C=function(){var t=$(".all-elements").height(),e=$(".mainMenu").height();t>e?$(".mobile").height(t):$(".mobile").height(e)},L=function(){$(this).addClass("act"),$(".mainMenu").addClass("act"),$(".cross-icon").addClass("hidden"),l(!1),C()},k=function(){n.getCatList("",function(t){y(t),T(t)})},y=function(t){n.sessionTabs(function(n){var a=1;n.forEach(function(n){var i;!0===n.focused?i="Current Browser Tabs":(i="Browser "+a+" Tabs",a+=1);var r=`<div class="card-container">\n                        <div class="card">\n                            <div class="card-header"> <i class="icon-table"></i> ${i} </div>\n                            <div>\n                           <table class="table table-hover" id="task-table">\n                            <tbody class="crrnt-tabs-${n.id}">\n                            </tbody>\n                        </table>\n                            </div>\n                        </div>\n                    </div>`;e.append(r),w(n.tabs,n.id,t)})})},w=function(t,e,n){var a="";n.defaultList.sort(function(t,e){var n=t.Label.toUpperCase(),a=e.Label.toUpperCase();return n<a?-1:n>a?1:0}),a+="<option>Select Category</option>",n.defaultList.filter(function(t){a+=`<option id="${t.id}">${t.Label}</option>`}),t.forEach(function(t){var n=t.favIconUrl;n&&null!=n||(n="assets/img/16.png");var i=`<tr class="tab-${e}-${t.id}">\n                       <td width="75%">  \n                           <img class="favionlink" src=${n}>  \n                            <span class="tabtitle">${t.title}</span>  \n                         </td>\n                        <td width="25%">\n                        <select  class="cat-dropdown form-control" id="select-${e}-${t.id}">${a}</select>\n                        <a href="#" data-url="${t.url}" class="add-btn save-btn btn-xs btn-primary" id="${e}-${t.id}">Save</a>\n              </td></tr>`;$(".crrnt-tabs-"+e).append(i)})},T=function(e){var n="";jQuery.each(e.defaultList,function(t,e){var a=`<li><div catid=${e.id} class="cross-icon catdelicon hidden"><i catid=${e.id} class="icon-minus-sign"></i></div>\n                    <a href="#" class="circle-link" id=${e.id} title=${e.Label}>\n                        <i class="bg-${e.defaultcolor}">${e.InsideCircle}</i>\n                     </a><br>\n                    <span class="label-txt">${e.Label}</span>\n                </li>`;n+=a}),""!==n&&t.html(n)};return{init:function(){catdelet=!1;var a=$("body");n=new appModel,t=$(".cat-listing"),$(".crrnt-tabs"),e=$(".tabs-container"),k(),$(".logo-right , .click-here").on("click",L),$(".logo").on("click",p),a.on("click",".save-btn",b),a.on("click",".delete-caticon",h),a.on("click",".addnewcat",c),a.on("change",".cat-dropdown",v),a.on("mousedown",".circle-link",f).on("mouseup mouseleave",".circle-link",m),a.on("click",".catdelicon",d),a.on("click",".circle-link",u),a.on("click",".back-arrow",o),a.on("click","#addnew",s),a.on("click",".point-to-web",r),a.on("click",".del-icons",i)}}})().init()});